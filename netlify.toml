[build]
  command = "npm run build"
  publish = "dist"

[functions]
  directory = "netlify/functions"

[[redirects]]
  from = "/"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/"
  to = "/login"
  status = 301
  force = true
  conditions = {Host = ["admin.callvia.in"]}

[[redirects]]
  from = "/login"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/dashboard"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/rooms"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/tenants"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/tenants-kyc"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/electricity"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/rent-increase"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/payments"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/verify-payments"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/maintenance"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/import"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/bank-accounts"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/backup"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/history"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/vacancy-report"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/tenant-history"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/import-logs"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/payments-reset"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/database-cleanup"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/settings"
  to = "/tenant-portal"
  status = 301
  force = true
  conditions = {Host = ["tenants.callvia.in"]}

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[build.environment]
  NODE_VERSION = "18"
  # Firebase API keys are safe to expose in client-side code
  # Security is enforced by Firestore rules, not by hiding the key
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"
